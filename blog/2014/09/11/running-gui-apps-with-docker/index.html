<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Running GUI apps with Docker | Fabio Rehm&#39;s Blog</title>

<meta property='og:title' content='Running GUI apps with Docker - Fabio Rehm&#39;s Blog'>
<meta property='og:description' content='I&#39;ve been doing all of my real (paid) work on VMs / containers for a while now but when it comes to writing Java code...'>
<meta property='og:url' content='http://fabiorehm.com/blog/2014/09/11/running-gui-apps-with-docker/'>
<meta property='og:site_name' content='Fabio Rehm&#39;s Blog'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/a198addd98dd9f149c7964a1340c9772?s=256'><meta property='article:section' content='Blog'><meta property='article:tag' content='docker'><meta property='article:tag' content='x11'><meta property='article:tag' content='firefox'><meta property='article:tag' content='netbeans'><meta property='article:tag' content='java'><meta property='article:published_time' content='2014-09-11T00:00:00Z'/><meta property='article:modified_time' content='2014-09-11T00:00:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@fgrehm'><meta name='twitter:creator' content='@fgrehm'>
<link rel="stylesheet" href="http://fabiorehm.com/css/style.css"/><link rel='stylesheet' href='/css/custom.css'></head>
<body>

<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="http://fabiorehm.com"><h1 class="title is-4">Fabio Rehm&#39;s Blog</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" href='mailto:fgrehm@gmail.com' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" href='https://github.com/fgrehm' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" href='https://linkedin.com/in/fabiorehm' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" href='https://twitter.com/fgrehm' target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="subtitle is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/docker">#docker</a>



  
  | <a class="subtitle is-6" href="/tags/x11">#x11</a>
  
  | <a class="subtitle is-6" href="/tags/firefox">#firefox</a>
  
  | <a class="subtitle is-6" href="/tags/netbeans">#netbeans</a>
  
  | <a class="subtitle is-6" href="/tags/java">#java</a>
  

      
    </div>
    <h2 class="subtitle is-6">September 11, 2014</h2>
    <h1 class="title">Running GUI apps with Docker</h1>
      
    <div class="content">
      

<p>I&rsquo;ve been doing all of my real (paid) work on VMs / containers for a while now but when it comes to writing Java code for some projects for university I still
need to move away from using vim and install some full blown IDE in order to be
productive. This has been bothering me for quite some time but this week I
was finally able put the pieces together to run NetBeans in a Docker container so that I can avoid
installing a lot of Java stuff on my machine that I don&rsquo;t use on a daily basis.</p>

<p>There are a few different options to run GUI applications inside a Docker
container like using <a href="http://blog.docker.com/2013/07/docker-desktop-your-desktop-over-ssh-running-inside-of-a-docker-container/" target="_blank">SSH with X11 forwarding</a>,
or <a href="http://stackoverflow.com/a/16311264" target="_blank">VNC</a> but the simplest one that I
figured out was to share my X11 socket with the container and use it directly.</p>

<p>The idea is pretty simple and you can easily it give a try by running a Firefox
container using the following <code>Dockerfile</code> as a starting point:</p>

<div class="highlight"><pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> ubuntu:14.04</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y firefox<span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Replace 1000 with your user / group id</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> <span class="nb">export</span> <span class="nv">uid</span><span class="o">=</span><span class="m">1000</span> <span class="nv">gid</span><span class="o">=</span><span class="m">1000</span> <span class="o">&amp;&amp;</span> <span class="se">\
</span><span class="se"></span>    mkdir -p /home/developer <span class="o">&amp;&amp;</span> <span class="se">\
</span><span class="se"></span>    <span class="nb">echo</span> <span class="s2">&#34;developer:x:</span><span class="si">${</span><span class="nv">uid</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">gid</span><span class="si">}</span><span class="s2">:Developer,,,:/home/developer:/bin/bash&#34;</span> &gt;&gt; /etc/passwd <span class="o">&amp;&amp;</span> <span class="se">\
</span><span class="se"></span>    <span class="nb">echo</span> <span class="s2">&#34;developer:x:</span><span class="si">${</span><span class="nv">uid</span><span class="si">}</span><span class="s2">:&#34;</span> &gt;&gt; /etc/group <span class="o">&amp;&amp;</span> <span class="se">\
</span><span class="se"></span>    <span class="nb">echo</span> <span class="s2">&#34;developer ALL=(ALL) NOPASSWD: ALL&#34;</span> &gt; /etc/sudoers.d/developer <span class="o">&amp;&amp;</span> <span class="se">\
</span><span class="se"></span>    chmod <span class="m">0440</span> /etc/sudoers.d/developer <span class="o">&amp;&amp;</span> <span class="se">\
</span><span class="se"></span>    chown <span class="si">${</span><span class="nv">uid</span><span class="si">}</span>:<span class="si">${</span><span class="nv">gid</span><span class="si">}</span> -R /home/developer<span class="err">
</span><span class="err">
</span><span class="err"></span>USER developer<span class="err">
</span><span class="err"></span><span class="k">ENV</span><span class="s"> HOME /home/developer</span><span class="err">
</span><span class="err"></span><span class="k">CMD</span><span class="s"> /usr/bin/firefox</span></code></pre></div>

<p><code>docker build -t firefox .</code> it and run the container with:</p>

<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">docker run -ti --rm <span class="se">\
</span><span class="se"></span>       -e <span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span> <span class="se">\
</span><span class="se"></span>       -v /tmp/.X11-unix:/tmp/.X11-unix <span class="se">\
</span><span class="se"></span>       firefox</code></pre></div>

<p>If all goes well you should see Firefox running from within a Docker container.</p>

<figure class="center">
  <a href="/images/posts/2014-09-11/firefox-demo.gif"><img src="/images/posts/2014-09-11/firefox-demo.gif"></a>
</figure>

<h2 id="getting-a-netbeans-container-up-and-running">Getting a NetBeans container up and running</h2>

<p>Preparing a NetBeans base image was not that straightforward since we need to
install some additional dependencies (namely the <code>libxext-dev</code>, <code>libxrender-dev</code>
and <code>libxtst-dev</code> packages) in order to get it to connect to the X11 socket
properly. I also had trouble using OpenJDK and had to switch to Oracle&rsquo;s Java
for it to work.</p>

<p>After lots of trial and error, I was finally able to make it work and the result
is a base image available at the <a href="https://registry.hub.docker.com/u/fgrehm/netbeans/" target="_blank">Docker Hub</a>
with sources on <a href="https://github.com/fgrehm/docker-netbeans" target="_blank">GitHub</a>.</p>

<p>Here&rsquo;s a quick demo of it in action:</p>

<figure class="center">
  <a href="/images/posts/2014-09-11/firefox-demo.gif"><img src="/images/posts/2014-09-11/netbeans-demo.gif"></a>
</figure>

<h2 id="future-work">Future work</h2>

<p>Over the next few months I&rsquo;ll be working on a <a href="https://www.playframework.com/" target="_blank">Play!</a>
app and will hopefully write a blog post on the workflow I used. Stay tunned for more :)</p>

<hr />

<p><em>PS: This approach of sharing the X11 socket also be applied to <a href="https://github.com/fgrehm/vagrant-lxc" target="_blank">vagrant-lxc</a>
containers and I&rsquo;ll document that on the project&rsquo;s Wiki when I
have a chance.</em></p>

    </div>
    
  </div>
</section>

<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
    <script type="text/javascript">
      var disqus_shortname = 'fgrehm';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; <a href="https://github.com/ribice">Fabio Rehm</a> 2017</p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-37437857-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


</body>
</html>
